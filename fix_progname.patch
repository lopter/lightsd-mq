# HG changeset patch
# User Sylvain Laurent <syllaur@gmail.com>
# Parent  3c719a86576f6675c0f0501f433fbce96f49c061
Fix missing null byte for progname

diff --git a/core/lightsd.c b/core/lightsd.c
--- a/core/lightsd.c
+++ b/core/lightsd.c
@@ -160,8 +160,8 @@
 int
 main(int argc, char *argv[], char *envp[])
 {
-    char progname[32];
-    memcpy(progname, argv[0], LGTD_MIN(sizeof(progname), strlen(argv[0])));
+    char progname[32] = { 0 };
+    memcpy(progname, argv[0], LGTD_MIN(sizeof(progname) - 1, strlen(argv[0])));
 
     lgtd_daemon_setup_proctitle(argc, argv, envp);
 
