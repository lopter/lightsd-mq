# HG changeset patch
# Parent  1ac38c86384ead939ff131b852ab43687d930bb9
Fix build warnings and update the changelog

diff --git a/core/lightsd.c b/core/lightsd.c
--- a/core/lightsd.c
+++ b/core/lightsd.c
@@ -79,7 +79,7 @@
 static void
 lgtd_signal_event_callback(int signum, short events, void *ctx)
 {
-    int i = (int)ctx;
+    intptr_t i = (intptr_t)ctx;
     assert(i >= 0);
     assert(i < (int)LGTD_ARRAY_SIZE(lgtd_signals));
     assert(i < (int)LGTD_ARRAY_SIZE(lgtd_signal_evs));
diff --git a/docs/changelog.rst b/docs/changelog.rst
--- a/docs/changelog.rst
+++ b/docs/changelog.rst
@@ -18,29 +18,32 @@
 and improvements, both in the code but also the documentation and examples.
 
 Also worth noting, is the full continuous integration pipeline that has been
-setup behind the scenes. It will hopefully make it a lot easier to work on the
-project.
+setup behind the scenes. Most of the work for this release went into it. It will
+hopefully make it a lot easier to work on the project.
 
 Fixes
 ~~~~~
 
-- A couple of crash/security fixes by , one being in jsmn_
-  (JSON parser) which has been upgraded to its latest version;
-- FreeBSD build (more BSD fixes to come though, see GH-16_);
-- WIPâ€¦
+- Discovery now works properly on computers with multiple network interfaces
+  (closes :gh:`2`);
+- Correctly support optional arguments in the JSON-RPC API;
+- A couple of crash/security fixes, one being in the jsmn_ JSON parser which has
+  been upgraded to its latest version;
+- FreeBSD build (more BSD fixes to come though, see :gh:`16`).
 
 .. _jsmn: https://github.com/zserge/jsmn
-.. _GH-16: https://github.com/lopter/lightsd/issues/16
 
 Acknowledgments
 ~~~~~~~~~~~~~~~
 
 Thanks to:
 
-- `Xavier Deguillard`_ for his contributions, additional automated tests will be
+- `Sylvain Laurent`_ for his original work on fixing discovery;
+- `Xavier Deguillard`_ for his contributions; additional automated tests will be
   setup to make crashes and security issues much harder to creep in;
 - All the people who have been trying the project and reporting issues!
 
+.. _Sylvain Laurent: https://github.com/Magicking/
 .. _Xavier Deguillard: https://github.com/Rip-Rip
 
 1.1.2 (2015-11-30)
diff --git a/tests/lifx/broadcast/test_broadcast_write_callback_getifaddrs_fails.c b/tests/lifx/broadcast/test_broadcast_write_callback_getifaddrs_fails.c
--- a/tests/lifx/broadcast/test_broadcast_write_callback_getifaddrs_fails.c
+++ b/tests/lifx/broadcast/test_broadcast_write_callback_getifaddrs_fails.c
@@ -27,12 +27,6 @@
 
 enum { MOCK_SOCKET_FD = 32 };
 static struct event *MOCK_WRITE_EV = (struct event *)0x7061726973;
-static const struct sockaddr_in LIFX_BROADCAST_ADDR = {
-    .sin_family = AF_INET,
-    .sin_addr = { INADDR_BROADCAST },
-    .sin_port = LGTD_STATIC_HTONS(LGTD_LIFX_PROTOCOL_PORT),
-    .sin_zero = { 0 }
-};
 
 static int event_del_call_count = 0;
 
